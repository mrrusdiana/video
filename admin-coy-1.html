<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN PANEL</title>

<style>
body{
  margin:0;
  background:#020617;
  color:#e5e7eb;
  font-family:Arial, sans-serif;
}
h1,h2{margin:10px 0;}
section{padding:16px;border-bottom:1px solid #1e293b;}
input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:none;
}
input{background:#0f172a;color:#e5e7eb;}
button{background:#2563eb;color:white;font-weight:bold;cursor:pointer}
.card{
  background:#0f172a;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
.actions button{
  width:auto;
  margin-right:6px;
  background:#334155;
}
</style>
</head>

<body>

<h1 style="padding:16px">ADMIN PANEL</h1>

<section>
<h2>WEB UTAMA (mainContents)</h2>
<input id="mainId" placeholder="Document ID (contoh: part1)">
<input id="mainTitle" placeholder="Judul">
<input id="mainImage" placeholder="Image URL">
<input id="mainOrder" type="number" placeholder="Order">
<button onclick="addMain()">SIMPAN / UPDATE</button>

<div id="mainList"></div>
</section>

<section>
<h2>PART / ITEMS</h2>
<input id="itemId" placeholder="Document ID (contoh: part1)">
<input id="itemTitle" placeholder="Judul">
<input id="itemImage" placeholder="Image URL">
<input id="itemPublic" placeholder="Public Link">
<input id="itemPrivate" placeholder="Private Link">
<input id="itemOrder" type="number" placeholder="Order">
<button onclick="addItem()">SIMPAN / UPDATE</button>

<div id="itemList"></div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, doc, setDoc, deleteDoc, onSnapshot, collection } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA3aIqisDiMJodevc3r_8w4i5KzD3C3880",
  authDomain: "rusdianacuy.firebaseapp.com",
  projectId: "rusdianacuy"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* WEB UTAMA */
window.addMain = async()=>{
  await setDoc(doc(db,"mainContents",mainId.value),{
    title:mainTitle.value,
    image:mainImage.value,
    order:Number(mainOrder.value),
    active:true
  });
};

onSnapshot(collection(db,"mainContents"),snap=>{
  mainList.innerHTML="";
  snap.forEach(d=>{
    const x=d.data();
    mainList.innerHTML+=`
    <div class="card">
      <b>${d.id}</b> - ${x.title}
      <div class="actions">
        <button onclick="delMain('${d.id}')">Hapus</button>
      </div>
    </div>`;
  });
});

window.delMain=async(id)=>{await deleteDoc(doc(db,"mainContents",id));}

/* ITEMS */
window.addItem = async()=>{
  await setDoc(doc(db,"items",itemId.value),{
    title:itemTitle.value,
    image:itemImage.value,
    publiclink:itemPublic.value,
    privatelink:itemPrivate.value,
    order:Number(itemOrder.value),
    active:true
  });
};

onSnapshot(collection(db,"items"),snap=>{
  itemList.innerHTML="";
  snap.forEach(d=>{
    const x=d.data();
    itemList.innerHTML+=`
    <div class="card">
      <b>${d.id}</b> - ${x.title}
      <div class="actions">
        <button onclick="delItem('${d.id}')">Hapus</button>
      </div>
    </div>`;
  });
});

window.delItem=async(id)=>{await deleteDoc(doc(db,"items",id));}
</script>

</body>
</html>
